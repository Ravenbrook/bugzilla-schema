<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>

<title> Bugzilla Schema Documentation Generation Code </title>

</head>

<body bgcolor="#FFFFFF" text="#000000" link="#000099" vlink="#660066" alink="#FF0000">

<div align="center">

<p>
<a href="/">Ravenbrook</a>
/ <a href="/project/">Projects</a>
/ <a href="/project/p4dti/">Perforce Defect Tracking Integration</a>
/ <a href="/project/p4dti/tool/">Tools</a>
/ <a href="/project/p4dti/tool/cgi/bugzilla-schema/">Bugzilla Schema</a>
</p>

<hr />

<h1> Bugzilla Schema Documentation Generation Code </h1>

<address>
<a href="mailto:nb@ravenbrook.com">Nick Barnes</a>,
<a href="http://www.ravenbrook.com/">Ravenbrook Limited</a>,
2008-05-12
</address>

</div>

<h2><a id="section-1" name="section-1">1. Introduction</a></h2>

<p> This document describes the code and documents used to generate
the online Bugzilla schema documentation, produced as a side-benefit
of the <a href="/project/p4dti/">Perforce Defect Tracking
Integration</a> project</a>.</p>

<p> Please note that all this code was written and has been maintained
in a very ad-hoc fashion, and the job which it aims to achieve is
intrinsically complex.  We are not proud of this code, and publish it
only because others have expressed an interest in it and we hope it
might be useful.</p>

<p> This document will be modified as this tool is developed. </p>

<p> The readership of this document is anyone interested in the
project. </p>

<p> This document is not confidential. </p>

<h2><a id="section-2" name="section-2">2. Index</a></h2>

<table>

<tr valign="top">

  <td><code><a href="pickle_schema.py">pickle_schema.py</a></code> </td>

  <td>A Python module to interrogate MySQL to obtain a live database
  schema, and to write a "pickled" version of that schema into a file
  in the "pickles" directory.</td>
</tr>

<tr valign="top">

  <td><code><a href="pickles">pickles</a></code> </td>

  <td>A directory containing pickled versions of every Bugzilla
  database schema, generated by pickle_schema.py.  Each pickle is
  named after the first version of Bugzilla which had that
  schema.</td>

</tr>

<tr valign="top">

  <td><code><a href="get_schema.py">get_schema.py</a></code> </td>

  <td>A Python module to read a pickled schema from the "pickles"
  directory, annotate it with data from schema_remarks.py, and convert
  it to a canonical Python dictionary form.</td>

</tr>

<tr valign="top">

  <td><code><a href="schema_remarks.py">schema_remarks.py</a></code> </td>

  <td>A Python module defining all the comments and running text which
  are ever used in the generated documentation (excluding
  automatically-generated text such as field names, types, attributes,
  and notes on schema changes).  Also lists the schemas available in
  "pickles", and provides the mapping from Bugzilla version to schema
  version name.</td>

</tr>

<tr valign="top">

  <td><code><a href="make_schema_doc.py">make_schema_doc.py</a></code> </td>

  <td>The main Python documentation generation module.  Uses the
  unpickled schemas fetched by get_schema.py, compares them to
  identify schema changes and colour the resulting charts, processes
  the text to include comments appropriate to the range of schemas
  requested, and automated comments reflecting the schema version
  ranges specific to particular pieces of commentary, and produces the
  resulting HTML document.</td>

</tr>

<tr valign="top">

  <td><code><a href="index.py">index.py</a></code> </td>

  <td>The front-end CGI script which presents a form, validates input
  through the form, and drives make_schema_doc to produce the schema
  documentation.</td>

</tr>

<tr valign="top">

  <td><code><a href="index.cgi">index.cgi</a></code> </td>

  <td>A tiny Python script which uses index.py to do all of the CGI
  work.  The two files are separated so that the source of index.py
  can be published directly through the web interface.</td>

</tr>

</table>

<h2><a id="section-A" name="section-A">A. References</a></h2>

<h2><a id="section-B" name="section-B">B. Document History</a></h2>

<table>

<tr valign="top">

  <td> 2008-05-12 </td>

  <td> <a href="mailto:nb@ravenbrook.com">NB</a> </td>

  <td> Created. </td>

</tr>

</table>

<hr />

<p> <small>This document is copyright &copy; 2008 Perforce Software, Inc.  All rights reserved.</small> </p>

<p> <small>Redistribution and use of this document in any form, with or without modification, is permitted provided that redistributions of this document retain the above copyright notice, this condition and the following disclaimer.</small> </p>

<p> <small> <strong> This document is provided by the copyright holders and contributors "as is" and any express or implied warranties, including, but not limited to, the implied warranties of merchantability and fitness for a particular purpose are disclaimed. In no event shall the copyright holders and contributors be liable for any direct, indirect, incidental, special, exemplary, or consequential damages (including, but not limited to, procurement of substitute goods or services; loss of use, data, or profits; or business interruption) however caused and on any theory of liability, whether in contract, strict liability, or tort (including negligence or otherwise) arising in any way out of the use of this document, even if advised of the possibility of such damage. </strong> </small> </p>

<div align="center">

<p><code>$Id$</code></p>

<p>
<a href="/">Ravenbrook</a>
/ <a href="/project/">Projects</a>
/ <a href="/project/p4dti/">Perforce Defect Tracking Integration</a>
/ <a href="/project/p4dti/tool/">Tools</a>
/ <a href="/project/p4dti/tool/cgi/bugzilla-schema/">Bugzilla Schema</a>
</p>

</div>

</body>

</html>


